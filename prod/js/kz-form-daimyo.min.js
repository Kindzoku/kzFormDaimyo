;(function() {
"use strict";

angular.module("kz.formDaimyo",[]);
function kzControl(){return{require:["^kzUnit","ngModel"],link:function(o,n,r,e){var t=e[0],i=e[1];t.setModel(i)}}}angular.module("kz.formDaimyo").directive("kzControl",kzControl);
function kzProvider(){var n=!1,e={required:"ng-required",pattern:"ng-pattern",minlength:"ng-minlength",maxlength:"ng-maxlength"};return{requireOnInit:function(e){n=e||!1},addRuleType:function(n,r){e[n]=r},$get:function(){return{requiredOnInit:n,rules:e}}}}angular.module("kz.formDaimyo").provider("$kz",kzProvider);
function kzRoot(){return{scope:!0,controller:kzRootController}}function kzRootController(o){var t=this;t.models=[],t.setModel=function(o){t.models.push(o)}}angular.module("kz.formDaimyo").directive("kzRoot",kzRoot),kzRootController.$inject=["$scope"];
function kzRq(n){return{require:"^kzUnit",link:function(t,r,i,e){function o(n){if(!u){for(var i=r[0];(i=i.parentElement)&&"form"!==i.tagName.toLowerCase(););var e=angular.element(i);e.on("submit",function(){u=!0,t.$apply()}),c.dtWatch=t.$watch(function(){return n.$dirty},function(n){n&&(u=!0,c.dtWatch())})}c.rqWatch=t.$watch(function(){return n.$error.required+u},function(){u&&r.toggleClass(a,n.$error.required||!1)}),t.$on("$destroy",function(){for(var n in c)c[n]()})}var u=n.requiredOnInit,a=i.kzRq||"kz-rq-invalid",c={};i.kzRqOninit&&(u="true"===i.kzRqOninit),t.$evalAsync(function(){c.init=t.$watch(function(){return e.model},function(n){n&&(c.init(),o(n))})})}}}angular.module("kz.formDaimyo").directive("kzRq",kzRq),kzRq.$inject=["$kz"];
!function(){function r(r,e,t){return{terminal:!0,priority:1500,require:"^kzUnit",compile:function(i){return i.removeAttr("kz-rules"),{post:function(i,n,o,u){var a=i.$watch(o.kzRules,function(c){if(c){a();var l=t(o.kzRules)(i);if(l){var f=r.rules;l.forEach(function(r){n.attr(f[r.type]||r.type,r.value),u.setError(r.type,r.error)})}e(n)(i)}})}}}}}angular.module("kz.formDaimyo").directive("kzRules",r),r.$inject=["$kz","$compile","$parse"]}();
function kzUnit(){return{scope:!0,require:["kzUnit","^?kzRoot"],controller:kzUnitController,link:function(o,r,n,t){var e=t[0];e.root=t[1]}}}function kzUnitController(o){var r=this,n={},t={};r.setModel=function(e){r.model=e,t.errors=o.$watchCollection(function(){return e.$error},function(r){o.$errors={},Object.keys(r).map(function(r){o.$errors[r]=n[r]})}),r.root&&r.root.setModel(e)},r.setError=function(o,r){n[o]=r},o.$on("$destroy",function(){for(var o in t)t[o]()})}angular.module("kz.formDaimyo").directive("kzUnit",kzUnit),kzUnitController.$inject=["$scope"];
}());
